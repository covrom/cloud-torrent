/*!
 * velox - v0.3.1 - https://github.com/jpillora/velox
 * Jaime Pillora <dev@jpillora.com> - MIT Copyright 2017
 */
!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e){function n(t,e){return l.call(t,e)}function o(t){if(Array.isArray(t)){for(var e=new Array(t.length),o=0;o<e.length;o++)e[o]=""+o;return e}if(Object.keys)return Object.keys(t);var e=[];for(var r in t)n(t,r)&&e.push(r);return e}function r(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function i(t){for(var e,n=0,o=t.length;n<o;){e=t.charCodeAt(n);{if(!(e>=48&&e<=57))return!1;n++}}return!0}function s(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function a(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function h(t,e){var o;for(var r in t)if(n(t,r)){if(t[r]===e)return s(r)+"/";if("object"==typeof t[r]&&""!=(o=h(t[r],e)))return s(r)+"/"+o}return""}function c(t,e){if(t===e)return"/";var n=h(t,e);if(""===n)throw new Error("Object not found in root");return"/"+n}function u(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(u(t[e]))return!0}else if("object"==typeof t)for(var r=o(t),i=r.length,e=0;e<i;e++)if(u(t[r[e]]))return!0;return!1}var p=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},l=Object.prototype.hasOwnProperty;e.hasOwnProperty=n,e._objectKeys=o,e._deepClone=r,e.isInteger=i,e.escapePathComponent=s,e.unescapePathComponent=a,e._getPathRecursive=h,e.getPath=c,e.hasUndefined=u;var f=function(t){function e(e,n,o,r,i){t.call(this,e),this.message=e,this.name=n,this.index=o,this.operation=r,this.tree=i}return p(e,t),e}(Error);e.PatchError=f},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){function o(t){return null===t||void 0===t}function r(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function i(t,e,n){var i,u;if(o(t)||o(e))return!1;if(t.prototype!==e.prototype)return!1;if(h(t))return!!h(e)&&(t=s.call(t),e=s.call(e),c(t,e,n));if(r(t)){if(!r(e))return!1;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}try{var p=a(t),l=a(e)}catch(t){return!1}if(p.length!=l.length)return!1;for(p.sort(),l.sort(),i=p.length-1;i>=0;i--)if(p[i]!=l[i])return!1;for(i=p.length-1;i>=0;i--)if(u=p[i],!c(t[u],e[u],n))return!1;return typeof t==typeof e}var s=Array.prototype.slice,a=n(8),h=n(9),c=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:i(t,e,n))}},function(t,e,n){function o(t,e){if(""==e)return t;var n={op:"_get",path:e};return r(t,n),n.value}function r(t,n,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!0),r&&("function"==typeof r?r(n,0,t,n.path):a(n,0)),""===n.path){var s={newDocument:t};if("add"===n.op)return s.newDocument=n.value,s;if("replace"===n.op)return s.newDocument=n.value,s.removed=t,s;if("move"===n.op||"copy"===n.op)return s.newDocument=o(t,n.from),"move"===n.op&&(s.removed=t),s;if("test"===n.op){if(s.test=p(t,n.value),!1===s.test)throw new e.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,t);return s.newDocument=t,s}if("remove"===n.op)return s.removed=t,s.newDocument=null,s;if("_get"===n.op)return n.value=t,s;if(r)throw new e.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",0,n,t);return s}i||(t=l._deepClone(t));var h=n.path||"",c=h.split("/"),u=t,v=1,y=c.length,m=void 0,w=void 0,g=void 0;for(g="function"==typeof r?r:a;;){if(w=c[v],r&&void 0===m&&(void 0===u[w]?m=c.slice(0,v).join("/"):v==y-1&&(m=n.path),void 0!==m&&g(n,0,t,m)),v++,Array.isArray(u)){if("-"===w)w=u.length;else{if(r&&!l.isInteger(w))throw new e.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",0,n.path,n);l.isInteger(w)&&(w=~~w)}if(v>=y){if(r&&"add"===n.op&&w>u.length)throw new e.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",0,n.path,n);var s=d[n.op].call(n,u,w,t);if(!1===s.test)throw new e.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,t);return s}}else if(w&&-1!=w.indexOf("~")&&(w=l.unescapePathComponent(w)),v>=y){var s=f[n.op].call(n,u,w,t);if(!1===s.test)throw new e.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,t);return s}u=u[w]}}function i(t,n,o){if(o&&!Array.isArray(n))throw new e.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");for(var i=new Array(n.length),s=0,a=n.length;s<a;s++)i[s]=r(t,n[s],o),t=i[s].newDocument;return i.newDocument=t,i}function s(t,n){var o=r(t,n);if(!1===o.test)throw new e.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,t);return o.newDocument}function a(t,n,o,r){if("object"!=typeof t||null===t||Array.isArray(t))throw new e.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,t,o);if(!f[t.op])throw new e.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,t,o);if("string"!=typeof t.path)throw new e.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,t,o);if(0!==t.path.indexOf("/")&&t.path.length>0)throw new e.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",n,t,o);if(("move"===t.op||"copy"===t.op)&&"string"!=typeof t.from)throw new e.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,t,o);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new e.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,t,o);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&l.hasUndefined(t.value))throw new e.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,t,o);if(o)if("add"==t.op){var i=t.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new e.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,t,o)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==r)throw new e.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,t,o)}else if("move"===t.op||"copy"===t.op){var a={op:"_get",path:t.from,value:void 0},c=h([a],o);if(c&&"OPERATION_PATH_UNRESOLVABLE"===c.name)throw new e.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,t,o)}}function h(t,n,o){try{if(!Array.isArray(t))throw new e.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(n)i(l._deepClone(n),l._deepClone(t),o||!0);else{o=o||a;for(var r=0;r<t.length;r++)o(t[r],r,n,void 0)}}catch(t){if(t instanceof e.JsonPatchError)return t;throw t}}var c={strict:!0},u=n(2),p=function(t,e){return u(t,e,c)},l=n(0);e.JsonPatchError=l.PatchError,e.deepClone=l._deepClone;var f={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var o=t[e];return delete t[e],{newDocument:n,removed:o}},replace:function(t,e,n){var o=t[e];return t[e]=this.value,{newDocument:n,removed:o}},move:function(t,e,n){var i=o(n,this.path);i&&(i=l._deepClone(i));var s=r(n,{op:"remove",path:this.from}).removed;return r(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:i}},copy:function(t,e,n){var i=o(n,this.from);return r(n,{op:"add",path:this.path,value:l._deepClone(i)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:p(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},d={add:function(t,e,n){return l.isInteger(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){return{newDocument:n,removed:t.splice(e,1)[0]}},replace:function(t,e,n){var o=t[e];return t[e]=this.value,{newDocument:n,removed:o}},move:f.move,copy:f.copy,test:f.test,_get:f._get};e.getValueByPointer=o,e.applyOperation=r,e.applyPatch=i,e.applyReducer=s,e.validator=a,e.validate=h},function(t,e,n){"use strict";function o(t){if(r.online=navigator.onLine,r.online)for(var e=0;e<i.length;e++)i[e].retrying&&i[e].retry()}n(5);var r=n(6),i=r.connections;window.addEventListener("online",o),window.addEventListener("offline",o),window.velox=r,t.exports=r},function(t,e){!function(t){"use strict";function e(t,e,o,r,i){this._internal=new n(t,e,o,r,i)}function n(t,e,n,o,r){this.onStartCallback=e,this.onProgressCallback=n,this.onFinishCallback=o,this.thisArg=r,this.xhr=t,this.state=0,this.charOffset=0,this.offset=0,this.url="",this.withCredentials=!1,this.timeout=0}function o(){this._data={}}function r(){this._listeners=new o}function i(t){p(function(){throw t},0)}function s(t){this.type=t,this.target=void 0}function a(t,e){s.call(this,t),this.data=e.data,this.lastEventId=e.lastEventId}function h(t,e){r.call(this),this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url="",this.readyState=g,this.withCredentials=!1,this._internal=new c(this,t,e)}function c(t,n,o){this.url=n.toString(),this.readyState=g,this.withCredentials=y&&void 0!=o&&Boolean(o.withCredentials),this.es=t,this.initialRetry=A(1e3,0),this.heartbeatTimeout=A(45e3,0),this.lastEventId="",this.retry=this.initialRetry,this.wasActivity=!1;var r=void 0!=o&&void 0!=o.Transport?o.Transport:m,i=new r;this.transport=new e(i,this.onStart,this.onProgress,this.onFinish,this),this.timeout=0,this.currentState=w,this.dataBuffer=[],this.lastEventIdBuffer="",this.eventTypeBuffer="",this.state=S,this.fieldStart=0,this.valueStart=0,this.es.url=this.url,this.es.readyState=this.readyState,this.es.withCredentials=this.withCredentials,this.onTimeout()}function u(){this.CONNECTING=g,this.OPEN=b,this.CLOSED=E}var p=t.setTimeout,l=t.clearTimeout,f=function(){};e.prototype.open=function(t,e){this._internal.open(t,e)},e.prototype.cancel=function(){this._internal.cancel()},n.prototype.onStart=function(){if(1===this.state){this.state=2;var t=0,e="",n=void 0;if("contentType"in this.xhr)t=200,e="OK",n=this.xhr.contentType;else try{t=this.xhr.status,e=this.xhr.statusText,n=this.xhr.getResponseHeader("Content-Type")}catch(o){t=0,e="",n=void 0}void 0==n&&(n=""),this.onStartCallback.call(this.thisArg,t,e,n)}},n.prototype.onProgress=function(){if(this.onStart(),2===this.state||3===this.state){this.state=3;var t="";try{t=this.xhr.responseText}catch(t){}for(var e=this.charOffset,n=t.length,o=this.offset;o<n;o+=1){var r=t.charCodeAt(o);r!=="\n".charCodeAt(0)&&r!=="\r".charCodeAt(0)||(this.charOffset=o+1)}this.offset=n;var i=t.slice(e,this.charOffset);this.onProgressCallback.call(this.thisArg,i)}},n.prototype.onFinish=function(){this.onProgress(),3===this.state&&(this.state=4,0!==this.timeout&&(l(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg))},n.prototype.onReadyStateChange=function(){void 0!=this.xhr&&(4===this.xhr.readyState?(this.xhr.status,this.onFinish()):3===this.xhr.readyState?this.onProgress():this.xhr.readyState)},n.prototype.onTimeout2=function(){this.timeout=0;var e=/^data\:([^,]*?)(base64)?,([\S]*)$/.exec(this.url),n=e[1],o="base64"===e[2]?t.atob(e[3]):decodeURIComponent(e[3]);1===this.state&&(this.state=2,this.onStartCallback.call(this.thisArg,200,"OK",n)),2!==this.state&&3!==this.state||(this.state=3,this.onProgressCallback.call(this.thisArg,o)),3===this.state&&(this.state=4,this.onFinishCallback.call(this.thisArg))},n.prototype.onTimeout1=function(){this.timeout=0,this.open(this.url,this.withCredentials)},n.prototype.onTimeout0=function(){var t=this;this.timeout=p(function(){t.onTimeout0()},500),3===this.xhr.readyState&&this.onProgress()},n.prototype.handleEvent=function(t){"load"===t.type?this.onFinish():"error"===t.type?this.onFinish():"abort"===t.type?this.onFinish():"progress"===t.type?this.onProgress():"readystatechange"===t.type&&this.onReadyStateChange()},n.prototype.open=function(e,n){this.cancel(),this.url=e,this.withCredentials=n,this.state=1,this.charOffset=0,this.offset=0;var o=this;if(void 0!=/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(e))return void(this.timeout=p(function(){o.onTimeout2()},0));if((!("ontimeout"in this.xhr)||"sendAsBinary"in this.xhr||"mozAnon"in this.xhr)&&void 0!=t.document&&void 0!=t.document.readyState&&"complete"!==t.document.readyState)return void(this.timeout=p(function(){o.onTimeout1()},4));this.xhr.onload=function(t){o.handleEvent({type:"load"})},this.xhr.onerror=function(){o.handleEvent({type:"error"})},this.xhr.onabort=function(){o.handleEvent({type:"abort"})},this.xhr.onprogress=function(){o.handleEvent({type:"progress"})},this.xhr.onreadystatechange=function(){o.handleEvent({type:"readystatechange"})},this.xhr.open("GET",e,!0),this.xhr.withCredentials=n,this.xhr.responseType="text","setRequestHeader"in this.xhr&&this.xhr.setRequestHeader("Accept","text/event-stream");try{this.xhr.send(void 0)}catch(t){throw t}"readyState"in this.xhr&&void 0!=t.opera&&(this.timeout=p(function(){o.onTimeout0()},0))},n.prototype.cancel=function(){0!==this.state&&4!==this.state&&(this.state=4,this.xhr.onload=f,this.xhr.onerror=f,this.xhr.onabort=f,this.xhr.onprogress=f,this.xhr.onreadystatechange=f,this.xhr.abort(),0!==this.timeout&&(l(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg)),this.state=0},o.prototype.get=function(t){return this._data[t+"~"]},o.prototype.set=function(t,e){this._data[t+"~"]=e},o.prototype.delete=function(t){delete this._data[t+"~"]},r.prototype.dispatchEvent=function(t){t.target=this;var e=t.type.toString(),n=this._listeners,o=n.get(e);if(void 0!=o)for(var r=o.length,s=void 0,a=0;a<r;a+=1){s=o[a];try{"function"==typeof s.handleEvent?s.handleEvent(t):s.call(this,t)}catch(t){i(t)}}},r.prototype.addEventListener=function(t,e){t=t.toString();var n=this._listeners,o=n.get(t);void 0==o&&(o=[],n.set(t,o));for(var r=o.length;r>=0;r-=1)if(o[r]===e)return;o.push(e)},r.prototype.removeEventListener=function(t,e){t=t.toString();var n=this._listeners,o=n.get(t);if(void 0!=o){for(var r=o.length,i=[],s=0;s<r;s+=1)o[s]!==e&&i.push(o[s]);0===i.length?n.delete(t):n.set(t,i)}},a.prototype=s.prototype;var d=t.XMLHttpRequest,v=t.XDomainRequest,y=void 0!=d&&void 0!=(new d).withCredentials,m=y||void 0!=d&&void 0==v?d:v,w=-1,g=0,b=1,E=2,S=4,O=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,A=function(t,e){var n=t;return n!==n&&(n=e),n<1e3?1e3:n>18e6?18e6:n},T=function(t,e,n){try{"function"==typeof e&&e.call(t,n)}catch(t){i(t)}};c.prototype.onStart=function(t,e,n){if(this.currentState===g)if(void 0==n&&(n=""),200===t&&O.test(n)){this.currentState=b,this.wasActivity=!0,this.retry=this.initialRetry,this.readyState=b,this.es.readyState=b;var o=new s("open");this.es.dispatchEvent(o),T(this.es,this.es.onopen,o)}else if(0!==t){var r="";r=200!==t?"EventSource's response has a status "+t+" "+e.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+n.replace(/\s+/g," ")+". Aborting the connection.",i(new Error(r)),this.close();var o=new s("error");this.es.dispatchEvent(o),T(this.es,this.es.onerror,o)}},c.prototype.onProgress=function(t){if(this.currentState===b){var e=t.length;0!==e&&(this.wasActivity=!0);for(var n=0;n<e;n+=1){var o=t.charCodeAt(n);if(3===this.state&&o==="\n".charCodeAt(0))this.state=S;else if(3===this.state&&(this.state=S),o==="\r".charCodeAt(0)||o==="\n".charCodeAt(0)){if(this.state!==S){5===this.state&&(this.valueStart=n+1);var r=t.slice(this.fieldStart,this.valueStart-1),i=t.slice(this.valueStart+(this.valueStart<n&&t.charCodeAt(this.valueStart)===" ".charCodeAt(0)?1:0),n);if("data"===r)this.dataBuffer.push(i);else if("id"===r)this.lastEventIdBuffer=i;else if("event"===r)this.eventTypeBuffer=i;else if("retry"===r)this.initialRetry=A(Number(i),this.initialRetry),this.retry=this.initialRetry;else if("heartbeatTimeout"===r&&(this.heartbeatTimeout=A(Number(i),this.heartbeatTimeout),0!==this.timeout)){l(this.timeout);var s=this;this.timeout=p(function(){s.onTimeout()},this.heartbeatTimeout)}}if(this.state===S){if(0!==this.dataBuffer.length){this.lastEventId=this.lastEventIdBuffer,""===this.eventTypeBuffer&&(this.eventTypeBuffer="message");var h=new a(this.eventTypeBuffer,{data:this.dataBuffer.join("\n"),lastEventId:this.lastEventIdBuffer});if(this.es.dispatchEvent(h),"message"===this.eventTypeBuffer&&T(this.es,this.es.onmessage,h),this.currentState===E)return}this.dataBuffer.length=0,this.eventTypeBuffer=""}this.state=o==="\r".charCodeAt(0)?3:S}else this.state===S&&(this.fieldStart=n,this.state=5),5===this.state?o===":".charCodeAt(0)&&(this.valueStart=n+1,this.state=6):6===this.state&&(this.state=7)}}},c.prototype.onFinish=function(){if(this.currentState===b||this.currentState===g){this.currentState=w,0!==this.timeout&&(l(this.timeout),this.timeout=0),this.retry>16*this.initialRetry&&(this.retry=16*this.initialRetry),this.retry>18e6&&(this.retry=18e6);var t=this;this.timeout=p(function(){t.onTimeout()},this.retry),this.retry=2*this.retry+1,this.readyState=g,this.es.readyState=g;var e=new s("error");this.es.dispatchEvent(e),T(this.es,this.es.onerror,e)}},c.prototype.onTimeout=function(){if(this.timeout=0,this.currentState===w){this.wasActivity=!1;var t=this;this.timeout=p(function(){t.onTimeout()},this.heartbeatTimeout),this.currentState=g,this.dataBuffer.length=0,this.eventTypeBuffer="",this.lastEventIdBuffer=this.lastEventId,this.fieldStart=0,this.valueStart=0,this.state=S;var e=this.url.slice(0,5);e="data:"!==e&&"blob:"!==e?this.url+(-1===this.url.indexOf("?",0)?"?":"&")+"lastEventId="+encodeURIComponent(this.lastEventId)+"&r="+(Math.random()+1).toString().slice(2):this.url;try{this.transport.open(e,this.withCredentials)}catch(t){throw this.close(),t}}else if(this.wasActivity){this.wasActivity=!1;var t=this;this.timeout=p(function(){t.onTimeout()},this.heartbeatTimeout)}else i(new Error("No activity within "+this.heartbeatTimeout+" milliseconds. Reconnecting.")),this.transport.cancel()},c.prototype.close=function(){this.currentState=E,this.transport.cancel(),0!==this.timeout&&(l(this.timeout),this.timeout=0),this.readyState=E,this.es.readyState=E},u.prototype=r.prototype,h.prototype=new u,h.prototype.close=function(){this._internal.close()},u.call(h),y&&(h.prototype.withCredentials=void 0);void 0!=m&&(void 0==t.EventSource||y&&!function(){return void 0!=t.EventSource&&"withCredentials"in t.EventSource.prototype}())&&(t.NativeEventSource=t.EventSource,t.EventSource=h)}("undefined"!=typeof window?window:this)},function(t,e,n){"use strict";(function(e){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=n(7),a=n(10),h=n(11),c=n(14),u="object"===("undefined"==typeof window?"undefined":i(window)),p="object"===(void 0===e?"undefined":i(e)),l=Symbol("WS"),f=Symbol("SSE"),d=u?window:p?e:null;if(!d)throw"where am i...";var v=["message","error","open","close"],y=[],m=function(){function t(e,n,r,s){switch(o(this,t),e){case l:if(!d.WebSocket)throw"This client does not support WebSockets";this.ws=!0;break;case f:this.sse=!0;break;default:throw"Type must be velox.WS or velox.SSE"}if(!r||"object"!==(void 0===r?"undefined":i(r)))throw"Invalid object";this.obj=r,this.opts=s||{},this.backoff=new c(this.opts.backoff||{min:100,max:2e4}),void 0===this.opts.retry&&(this.opts.retry=!0),n||(n="/velox"),this.url=n,this.id="",this.version=0,this.onupdate=function(){},this.onerror=function(){},this.onconnect=function(){},this.ondisconnect=function(){},this.onchange=function(){},this.connected=!1,this.connect()}return r(t,[{key:"connect",value:function(){var t=this;-1===y.indexOf(this)&&y.push(this),"Promise"in d&&(this.waited=null,this.waiter=new Promise(function(e){t.waited=e})),this.retrying=!0,this.retry()}},{key:"retry",value:function(){if(clearTimeout(this.retry.t),this.conn&&this.cleanup(),this.retrying){this.delay||(this.delay=100);var t=this.url;d.location&&!/^(ws|http)s?:/.test(t)&&(t=d.location.protocol+"//"+d.location.host+t),this.ws&&(t=t.replace(/^http/,"ws"));var e=h(t,!0);this.version&&(e.query.v=this.version),this.id&&(e.query.id=this.id),this.opts.username&&(e.username=this.opts.username),this.opts.password&&(e.password=this.opts.password),t=e.toString(),this.ws?this.conn=new d.WebSocket(t):this.conn=new d.EventSource(t,{withCredentials:!0});var n=this;v.forEach(function(t){n.conn["on"+t]=n["conn"+t].bind(n)}),this.sleepCheck.last=null,this.sleepCheck()}}},{key:"disconnect",value:function(){var t=y.indexOf(this);t>=0&&y.splice(t,1),this.retrying=!1,this.cleanup(),this.waiter&&this.waited()}},{key:"cleanup",value:function(){if(clearTimeout(this.pingout.t),this.conn){var t=this.conn;this.conn=null,v.forEach(function(e){t["on"+e]=null}),t&&t.readyState!==t.CLOSED&&t.close(),this.statusCheck()}}},{key:"send",value:function(t){var e=this.conn;if(e&&e instanceof d.WebSocket&&e.readyState===e.OPEN)return e.send(t)}},{key:"pingin",value:function(){clearTimeout(this.pingin.t),this.pingin.t=setTimeout(this.retry.bind(this),45e3)}},{key:"pingout",value:function(){this.send("ping"),clearTimeout(this.pingout.t),this.pingout.t=setTimeout(this.pingout.bind(this),25e3)}},{key:"sleepCheck",value:function(){var t=this.sleepCheck;clearInterval(t.t);var e=Date.now(),n=t.last&&e-t.last>3e4;t.last=e,t.t=setTimeout(this.sleepCheck.bind(this),5e3),n&&this.retry()}},{key:"statusCheck",value:function(t){var e=!!this.connected,n=!(!this.conn||this.conn.readyState!==this.conn.OPEN);e!==n&&(this.connected=n,this.onchange(this.connected),this.connected?this.onconnect():this.ondisconnect())}},{key:"connmessage",value:function(t){var e=void 0;try{e=JSON.parse(t.data)}catch(t){return void this.onerror(t)}return e.ping?void this.pingin():(e.id&&(this.id=e.id),e.body&&this.obj?(e.delta?s.applyPatch(this.obj,e.body):a(this.obj,e.body),"function"==typeof this.obj.$apply&&this.obj.$apply(),this.onupdate(this.obj),this.version=e.version,void this.backoff.reset()):void this.onerror("null objects"))}},{key:"connopen",value:function(){this.statusCheck(),this.pingin(),this.pingout()}},{key:"connclose",value:function(){if(this.statusCheck(),this.opts.retry){var t=this.backoff.duration();this.retrying&&w.online&&(this.retry.t=setTimeout(this.connect.bind(this),t))}else this.disconnect()}},{key:"connerror",value:function(t){this.conn&&this.conn instanceof d.EventSource?(this.conn.close(),this.connclose()):(this.statusCheck(),this.onerror(t))}},{key:"wait",value:function(){return this.waiter}}]),t}(),w=function t(e,n,o){return t.DEFAULT!==f&&d.WebSocket?t.ws(e,n,o):t.sse(e,n,o)};w.WS=l,w.ws=function(t,e,n){return new m(l,t,e,n)},w.SSE=w.DEFAULT=f,w.sse=function(t,e,n){return new m(f,t,e,n)},w.proto="v2",w.connections=y,w.online=!0,t.exports=w}).call(e,n(1))},function(t,e,n){function o(t){for(var e=0,n=v.length;e<n;e++)if(v[e].obj===t)return v[e]}function r(t,e){for(var n=0,o=t.observers.length;n<o;n++)if(t.observers[n].callback===e)return t.observers[n].observer}function i(t,e){for(var n=0,o=t.observers.length;n<o;n++)if(t.observers[n].observer===e)return void t.observers.splice(n,1)}function s(t,e){e.unobserve()}function a(t,e){var n,s=[],a=o(t);if(a?n=r(a,e):(a=new y(t),v.push(a)),n)return n;if(n={},a.value=p._deepClone(t),e){n.callback=e,n.next=null;var c=function(){h(n)},u=function(){clearTimeout(n.next),n.next=setTimeout(c)};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mouseup",u),window.addEventListener("keyup",u),window.addEventListener("mousedown",u),window.addEventListener("keydown",u),window.addEventListener("change",u)):(document.documentElement.attachEvent("onmouseup",u),document.documentElement.attachEvent("onkeyup",u),document.documentElement.attachEvent("onmousedown",u),document.documentElement.attachEvent("onkeydown",u),document.documentElement.attachEvent("onchange",u)))}return n.patches=s,n.object=t,n.unobserve=function(){h(n),clearTimeout(n.next),i(a,n),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mouseup",u),window.removeEventListener("keyup",u),window.removeEventListener("mousedown",u),window.removeEventListener("keydown",u)):(document.documentElement.detachEvent("onmouseup",u),document.documentElement.detachEvent("onkeyup",u),document.documentElement.detachEvent("onmousedown",u),document.documentElement.detachEvent("onkeydown",u)))},a.observers.push(new m(e,n)),n}function h(t){for(var e,n=0,o=v.length;n<o;n++)if(v[n].obj===t.object){e=v[n];break}c(e.value,t.object,t.patches,""),t.patches.length&&l.applyPatch(e.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function c(t,e,n,o){if(e!==t){"function"==typeof e.toJSON&&(e=e.toJSON());for(var r=p._objectKeys(e),i=p._objectKeys(t),s=!1,a=i.length-1;a>=0;a--){var h=i[a],u=t[h];if(!p.hasOwnProperty(e,h)||void 0===e[h]&&void 0!==u&&!1===Array.isArray(e))n.push({op:"remove",path:o+"/"+p.escapePathComponent(h)}),s=!0;else{var l=e[h];"object"==typeof u&&null!=u&&"object"==typeof l&&null!=l?c(u,l,n,o+"/"+p.escapePathComponent(h)):u!==l&&(!0,n.push({op:"replace",path:o+"/"+p.escapePathComponent(h),value:p._deepClone(l)}))}}if(s||r.length!=i.length)for(var a=0;a<r.length;a++){var h=r[a];p.hasOwnProperty(t,h)||void 0===e[h]||n.push({op:"add",path:o+"/"+p.escapePathComponent(h),value:p._deepClone(e[h])})}}}function u(t,e){var n=[];return c(t,e,n,""),n}var p=(n(2),n(0)),l=n(3),f=n(3);e.applyOperation=f.applyOperation,e.applyPatch=f.applyPatch,e.applyReducer=f.applyReducer,e.getValueByPointer=f.getValueByPointer,e.validate=f.validate,e.validator=f.validator;var d=n(0);e.JsonPatchError=d.PatchError,e.deepClone=d._deepClone,e.escapePathComponent=d.escapePathComponent,e.unescapePathComponent=d.unescapePathComponent;var v=[],y=function(){function t(t){this.observers=[],this.obj=t}return t}(),m=function(){function t(t,e){this.callback=t,this.observer=e}return t}();e.unobserve=s,e.observe=a,e.generate=h,e.compare=u},function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}e=t.exports="function"==typeof Object.keys?Object.keys:n,e.shim=n},function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function o(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();e=t.exports=r?n:o,e.supported=n,e.unsupported=o},function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function t(e,n){if(!e||"object"!==(void 0===e?"undefined":o(e))||!n||"object"!==(void 0===n?"undefined":o(n)))return n;var r;if(e instanceof Array&&n instanceof Array)for(;e.length>n.length;)e.pop();else for(r in e)"$"===r[0]||r in n||delete e[r];for(r in n)e[r]=t(e[r],n[r]);return e}},function(t,e,n){"use strict";(function(e){function o(t){t=t||e.location||{};var n,o={},r=typeof t;if("blob:"===t.protocol)o=new s(unescape(t.pathname),{});else if("string"===r){o=new s(t,{});for(n in d)delete o[n]}else if("object"===r){for(n in t)n in d||(o[n]=t[n]);void 0===o.slashes&&(o.slashes=l.test(t.href))}return o}function r(t){var e=p.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function i(t,e){for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),o=n.length,r=n[o-1],i=!1,s=0;o--;)"."===n[o]?n.splice(o,1):".."===n[o]?(n.splice(o,1),s++):s&&(0===o&&(i=!0),n.splice(o,1),s--);return i&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}function s(t,e,n){if(!(this instanceof s))return new s(t,e,n);var a,h,p,l,d,v,y=f.slice(),m=typeof e,w=this,g=0;for("object"!==m&&"string"!==m&&(n=e,e=null),n&&"function"!=typeof n&&(n=u.parse),e=o(e),h=r(t||""),a=!h.protocol&&!h.slashes,w.slashes=h.slashes||a&&e.slashes,w.protocol=h.protocol||e.protocol||"",t=h.rest,h.slashes||(y[2]=[/(.*)/,"pathname"]);g<y.length;g++)l=y[g],p=l[0],v=l[1],p!==p?w[v]=t:"string"==typeof p?~(d=t.indexOf(p))&&("number"==typeof l[2]?(w[v]=t.slice(0,d),t=t.slice(d+l[2])):(w[v]=t.slice(d),t=t.slice(0,d))):(d=p.exec(t))&&(w[v]=d[1],t=t.slice(0,d.index)),w[v]=w[v]||(a&&l[3]?e[v]||"":""),l[4]&&(w[v]=w[v].toLowerCase());n&&(w.query=n(w.query)),a&&e.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==e.pathname)&&(w.pathname=i(w.pathname,e.pathname)),c(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(l=w.auth.split(":"),w.username=l[0]||"",w.password=l[1]||""),w.origin=w.protocol&&w.host&&"file:"!==w.protocol?w.protocol+"//"+w.host:"null",w.href=w.toString()}function a(t,e,n){var o=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||u.parse)(e)),o[t]=e;break;case"port":o[t]=e,c(e,o.protocol)?e&&(o.host=o.hostname+":"+e):(o.host=o.hostname,o[t]="");break;case"hostname":o[t]=e,o.port&&(e+=":"+o.port),o.host=e;break;case"host":o[t]=e,/:\d+$/.test(e)?(e=e.split(":"),o.port=e.pop(),o.hostname=e.join(":")):(o.hostname=e,o.port="");break;case"protocol":o.protocol=e.toLowerCase(),o.slashes=!n;break;case"pathname":o.pathname=e.length&&"/"!==e.charAt(0)?"/"+e:e;break;default:o[t]=e}for(var r=0;r<f.length;r++){var i=f[r];i[4]&&(o[i[1]]=o[i[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o}function h(t){t&&"function"==typeof t||(t=u.stringify);var e,n=this,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var r=o+(n.slashes?"//":"");return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.host+n.pathname,e="object"==typeof n.query?t(n.query):n.query,e&&(r+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(r+=n.hash),r}var c=n(12),u=n(13),p=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,l=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,f=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};s.prototype={set:a,toString:h},s.extractProtocol=r,s.location=o,s.qs=u,t.exports=s}).call(e,n(1))},function(t,e,n){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,n){"use strict";function o(t){return decodeURIComponent(t.replace(/\+/g," "))}function r(t){for(var e,n=/([^=?&]+)=?([^&]*)/g,r={};e=n.exec(t);r[o(e[1])]=o(e[2]));return r}function i(t,e){e=e||"";var n=[];"string"!=typeof e&&(e="?");for(var o in t)s.call(t,o)&&n.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return n.length?e+n.join("&"):""}var s=Object.prototype.hasOwnProperty;e.stringify=i,e.parse=r},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0}}]);